<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># WeChatFerry Python å®¢æˆ·ç«¯[![PyPi](https://img.shields.io/pypi/v/wcferry.svg)](https://pypi.python.org/pypi/wcferry) [![Downloads](https://static.pepy.tech/badge/wcferry)](https://pypi.python.org/pypi/wcferry) [![Documentation Status](https://readthedocs.org/projects/wechatferry/badge/?version=latest)](https://wechatferry.readthedocs.io/zh/latest/?badge=latest)ğŸ¤–ç¤ºä¾‹æœºå™¨äººæ¡†æ¶ï¼š[WeChatRobot](https://github.com/lich0821/WeChatRobot)ã€‚## å¿«é€Ÿå¼€å§‹```shpip install --upgrade wcferry```### Demoï¼š```py#! /usr/bin/env python3# -*- coding: utf-8 -*-import loggingfrom threading import Threadfrom time import sleepfrom wcferry import Wcflogging.basicConfig(level='DEBUG', format=&quot;%(asctime)s %(message)s&quot;)LOG = logging.getLogger(&quot;Demo&quot;)def process_msg(wcf: Wcf):    &quot;&quot;&quot;å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯&quot;&quot;&quot;    while wcf.is_receiving_msg():        try:            msg = wcf.get_msg()        except Exception as e:            continue        LOG.info(msg)  # ç®€å•æ‰“å°def main():    LOG.info(&quot;Start demo...&quot;)    wcf = Wcf(debug=True)             # é»˜è®¤è¿æ¥æœ¬åœ°æœåŠ¡    # wcf = Wcf(&quot;tcp://127.0.0.1:10086&quot;) # è¿æ¥è¿œç«¯æœåŠ¡    sleep(5)  # ç­‰å¾®ä¿¡åŠ è½½å¥½ï¼Œä»¥å…ä¿¡æ¯æ˜¾ç¤ºå¼‚å¸¸    LOG.info(f&quot;å·²ç»ç™»å½•: {True if wcf.is_login() else False}&quot;)    LOG.info(f&quot;wxid: {wcf.get_self_wxid()}&quot;)    # å…è®¸æ¥æ”¶æ¶ˆæ¯    # wcf.enable_recv_msg(LOG.info) # deprecated    # å…è®¸æ¥æ”¶æ¶ˆæ¯    wcf.enable_receiving_msg()    Thread(target=process_msg, name=&quot;GetMessage&quot;, args=(wcf,), daemon=True).start()    # wcf.disable_recv_msg() # å½“éœ€è¦åœæ­¢æ¥æ”¶æ¶ˆæ¯æ—¶è°ƒç”¨    ret = wcf.send_text(&quot;Hello world.&quot;, &quot;filehelper&quot;)    LOG.info(f&quot;send_text: {ret}&quot;)    ret = wcf.send_image(&quot;TEQuant.jpeg&quot;, &quot;filehelper&quot;)  # éœ€è¦ç¡®ä¿å›¾ç‰‡è·¯å¾„æ­£ç¡®    LOG.info(f&quot;send_image: {ret}&quot;)    ret = wcf.send_file(&quot;README.MD&quot;, &quot;filehelper&quot;)  # éœ€è¦ç¡®ä¿æ–‡ä»¶è·¯å¾„æ­£ç¡®    LOG.info(f&quot;send_file: {ret}&quot;)    LOG.info(f&quot;Message types:\n{wcf.get_msg_types()}&quot;)    LOG.info(f&quot;Contacts:\n{wcf.get_contacts()}&quot;)    LOG.info(f&quot;DBs:\n{wcf.get_dbs()}&quot;)    LOG.info(f&quot;Tables:\n{wcf.get_tables('db')}&quot;)    LOG.info(f&quot;Results:\n{wcf.query_sql('MicroMsg.db', 'SELECT * FROM Contact LIMIT 1;')}&quot;)    # éœ€è¦çœŸæ­£çš„ V3ã€V4 ä¿¡æ¯    # wcf.accept_new_friend(&quot;v3&quot;, &quot;v4&quot;)    # å¡«å†™æ­£ç¡®çš„ç¾¤ ID å’Œæˆå‘˜ wxid    # ret = wcf.add_chatroom_members(&quot;chatroom id&quot;, &quot;wxid1,wxid2,wxid3,...&quot;)    # LOG.info(f&quot;add_chatroom_members: {ret}&quot;)    xml = '&lt;?xml version=&quot;1.0&quot;?&gt;&lt;msg&gt;&lt;appmsg appid=&quot;&quot; sdkver=&quot;0&quot;&gt;&lt;title&gt;å®å½“è¯æˆ¿ï¼Œ24å°æ—¶æœåŠ¡ï¼Œ28åˆ†é’Ÿé€è¯åˆ°å®¶ï¼&lt;/title&gt;&lt;des&gt;å®å½“å¿«è¯é¦–å®¶æ‰¿è¯ºèŒƒå›´å†…28åˆ†é’Ÿé€è¯åˆ°å®¶ï¼å®å½“å¿«è¯æ ¸å¿ƒåŒºåŸŸå†…7*24å°æ—¶å…¨å¤©å€™æœåŠ¡ï¼Œé€è¯ä¸Šé—¨ï¼å®å½“å¿«è¯å®˜ç½‘ä¸ºæ‚¨æä¾›å¿«æ·ä¾¿åˆ©ï¼Œæ­£å“ä½ä»·ï¼Œå®‰å…¨æ”¾å¿ƒçš„è´­è¯ã€é€è¯æœåŠ¡ä½“éªŒã€‚&lt;/des&gt;&lt;action&gt;view&lt;/action&gt;&lt;type&gt;33&lt;/type&gt;&lt;showtype&gt;0&lt;/showtype&gt;&lt;content /&gt;&lt;url&gt;https://mp.weixin.qq.com/mp/waerrpage?appid=wxc2edadc87077fa2a&amp;amp;type=upgrade&amp;amp;upgradetype=3#wechat_redirect&lt;/url&gt;&lt;dataurl /&gt;&lt;lowurl /&gt;&lt;lowdataurl /&gt;&lt;recorditem /&gt;&lt;thumburl /&gt;&lt;messageaction /&gt;&lt;md5&gt;7f6f49d301ebf47100199b8a4fcf4de4&lt;/md5&gt;&lt;extinfo /&gt;&lt;sourceusername&gt;gh_c2b88a38c424@app&lt;/sourceusername&gt;&lt;sourcedisplayname&gt;å®å½“å¿«è¯ è¯åº—é€è¯åˆ°å®¶å¤œé—´ä¹°è¯&lt;/sourcedisplayname&gt;&lt;commenturl /&gt;&lt;appattach&gt;&lt;totallen&gt;0&lt;/totallen&gt;&lt;attachid /&gt;&lt;emoticonmd5&gt;&lt;/emoticonmd5&gt;&lt;fileext&gt;jpg&lt;/fileext&gt;&lt;filekey&gt;da0e08f5c7259d03da150d5e7ca6d950&lt;/filekey&gt;&lt;cdnthumburl&gt;3057020100044b30490201000204e4c0232702032f4ef20204a6bace6f02046401f62d042430326337303430352d333734332d343362652d623335322d6233333566623266376334620204012400030201000405004c537600&lt;/cdnthumburl&gt;&lt;aeskey&gt;0db26456caf243fbd4efb99058a01d66&lt;/aeskey&gt;&lt;cdnthumbaeskey&gt;0db26456caf243fbd4efb99058a01d66&lt;/cdnthumbaeskey&gt;&lt;encryver&gt;1&lt;/encryver&gt;&lt;cdnthumblength&gt;61558&lt;/cdnthumblength&gt;&lt;cdnthumbheight&gt;100&lt;/cdnthumbheight&gt;&lt;cdnthumbwidth&gt;100&lt;/cdnthumbwidth&gt;&lt;/appattach&gt;&lt;weappinfo&gt;&lt;pagepath&gt;pages/index/index.html&lt;/pagepath&gt;&lt;username&gt;gh_c2b88a38c424@app&lt;/username&gt;&lt;appid&gt;wxc2edadc87077fa2a&lt;/appid&gt;&lt;version&gt;197&lt;/version&gt;&lt;type&gt;2&lt;/type&gt;&lt;weappiconurl&gt;http://wx.qlogo.cn/mmhead/Q3auHgzwzM4727n0NQ0ZIPQPlfp15m1WLsnrXbo1kLhFGcolgLyc0A/96&lt;/weappiconurl&gt;&lt;appservicetype&gt;0&lt;/appservicetype&gt;&lt;shareId&gt;1_wxc2edadc87077fa2a_29177e9a9b918cb9e75964f80bb8f32e_1677849476_0&lt;/shareId&gt;&lt;/weappinfo&gt;&lt;websearch /&gt;&lt;/appmsg&gt;&lt;fromusername&gt;wxid_xxxxxxxxxxxxxx&lt;/fromusername&gt;&lt;scene&gt;0&lt;/scene&gt;&lt;appinfo&gt;&lt;version&gt;1&lt;/version&gt;&lt;appname /&gt;&lt;/appinfo&gt;&lt;commenturl /&gt;&lt;/msg&gt;'    ret = wcf.send_xml(&quot;filehelper&quot;, xml, 0x21)    LOG.info(f&quot;send_xml: {ret}&quot;)    ret = wcf.send_emotion(&quot;emo.gif&quot;, &quot;filehelper&quot;)  # éœ€è¦ç¡®ä¿ gif è·¯å¾„æ­£ç¡®    LOG.info(f&quot;send_emotion: {ret}&quot;)    # ä¸€ç›´è¿è¡Œ    wcf.keep_running()if __name__ == &quot;__main__&quot;:    main()```|![ç¢²çŸ¿](https://raw.githubusercontent.com/lich0821/WeChatFerry/master/TEQuant.jpg)|![èµèµ](https://raw.githubusercontent.com/lich0821/WeChatFerry/master/QR.jpeg)||:-:|:-:||åå°å›å¤ `WeChatFerry` åŠ ç¾¤äº¤æµ|å¦‚æœä½ è§‰å¾—æœ‰ç”¨|## ä¸€èµ·å¼€å‘### é…ç½®ç¯å¢ƒ```sh# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒpython -m venv .env# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒsource .env/Scripts/activate# å‡çº§ pippip install --upgrade pip# å®‰è£…ä¾èµ–åŒ…pip install grpcio-tools pynng```### é‡æ–°ç”Ÿæˆ PB æ–‡ä»¶```shcd python\wcferry# CMDpython -m grpc_tools.protoc --python_out=. --proto_path=..\..\rpc\proto\ wcf.proto# GitBashpython -m grpc_tools.protoc --python_out=. --proto_path=../../rpc/proto/ wcf.proto```</longdescription>
</pkgmetadata>