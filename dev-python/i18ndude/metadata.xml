<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>i18ndude========.. contents::Introduction------------i18ndude performs various tasks related to ZPT's, Python Scripts and i18n... image:: https://github.com/collective/i18ndude/workflows/Tests/badge.svg    :alt: GitHub Actions badge    :target: https://github.com/collective/i18ndude/actionsCompatibility-------------i18ndude works with Python 3.8-3.11, and PyPy3.Older versions are not supported anymore, use the i18ndude 5.x seriesif you need that.You can install ``i18ndude`` with Buildout or ``pip``.With ``pip`` you may want to look at our `requirements.txt &lt;https://github.com/collective/i18ndude/blob/master/requirements.txt&gt;`_.``UnicodeEncodeError``----------------------When running some ``i18ndude`` commands, you might get a ``UnicodeEncodeError``.This can especially happen when ``i18ndude`` prints the result and you redirect the output or pipe it.This is tricky, maybe impossible, to solve in ``i18ndude`` itself.See this related `question on stackoverflow &lt;https://stackoverflow.com/questions/492483/setting-the-correct-encoding-when-piping-stdout-in-python&gt;`_.This question points to a solution that you yourself can do when you encounter this.In the (Unix-like) shell, do this::    export PYTHONIOENCODING=utf-8This fixes UnicodeEncodeErrors when piping or redirecting output that contains non-ascii.I (Maurits) have this line in my bash profile now.Note: if you get a ``UnicodeDecodeError``, so 'decode' instead of 'encode', then it may be something that needs fixing in ``i18ndude``.Please `report &lt;https://github.com/collective/i18ndude/issues&gt;`_ it then.Pre commit hook---------------Since version 6 we have a ``pre-commit`` hook available::    -   repo: https://github.com/collective/i18ndude        rev: &quot;master&quot;        hooks:        -   id: i18ndudeFor now it only finds the strings not marked for translation.Command line interface======================These are the various command line options... ### AUTOGENERATED FROM HERE ###i18ndude--------::  usage: i18ndude [-h]                  {find-untranslated,rebuild-pot,merge,sync,filter,admix,list,trmerge}                  ...  i18ndude performs various tasks related to ZPT's, Python Scripts  and i18n.  Its main task is to extract translation strings (msgids) into a  .pot file (with the 'rebuild-pot' command), and sync the .pot file  with .po files (with the 'sync' command).  Call i18ndude with one of the listed subcommands followed by  --help to get help for that subcommand.  options:    -h, --help            show this help message and exit  subcommands:    {find-untranslated,rebuild-pot,merge,sync,filter,admix,list,trmerge}find-untranslated-----------------::  usage: i18ndude find-untranslated [-h] [-s] [-n] [files ...]      Provide a list of ZPT filenames and I will output a report of places      where I suspect untranslated messages, i.e. tags for which      &quot;i18n:translate&quot; or &quot;i18n:attributes&quot; are missing.      If you provide the -s option, the report will only contain a summary      of errors and warnings for each file (or no output if there are no      errors or warnings). If you provide the -n option, the report will      contain only the errors for each file.      You can mark tags to be ignored for this translation check by      setting the &quot;i18n:ignore&quot; attribute on the tag. Same for      attributes with &quot;i18n:ignore-attributes&quot;. Note that i18ndude may      be happy with this, but your template engine may fail when trying      to render a template containing those ignore hints.  You need      Chameleon 2.23 or higher, or the to be released zope.tal 4.1.2.        positional arguments:    files            list of ZPT filenames  options:    -h, --help       show this help message and exit    -s, --silent     The report will only contain a summary of errors and                     warnings for each file (or no output if there are no errors                     or warnings).    -n, --nosummary  The report will contain only the errors for each file.rebuild-pot-----------::  usage: i18ndude rebuild-pot [-h] [--wrap | --no-wrap] [--width NUMBER] -p                              filename [-c domain] [-m filename]                              [--merge2 filename]                              [--exclude &quot;&lt;ignore1&gt; &lt;ignore2&gt; ...&quot;]                              [--no-line-numbers] [--line-numbers]                              [path ...]      Given a pot-file via the --pot option you can specify one or more      directories which including all sub-folders will be searched for      PageTemplates (*.*pt) and Python scripts (*.*py).      Make sure you have a backup copy of the original pot-file in case      you need to fill back in ids by hand.      If you specify a domain in --create I will create the pot file and      look for messages for that domain.  Otherwise I will take the      domain from the Domain header in the given pot file and keep the      headers from the file as base for a new pot file.      Note that in Python files we simply look for text within an underscore      method: _(&quot;...&quot;).  We do not know which domain this is.      If this finds text from a domain that you do not want to find,      you should give the underscore method for the unwanted domain      a different name, for example:        from zope.i18nmessageid import MessageFactory        PMF = MessageFactory(&quot;plone&quot;)        PMF(&quot;...&quot;)      If you give me an additional pot-file with the --merge &lt;filename&gt;      option, I try to merge these msgids into the target-pot file      afterwards. If a msgid already exists in the ones I found in the      ZPTs, I'll warn you and ignore that msgid. I take the mime-header      from this additional pot-file. If you provide a second pot-file via      --merge2 &lt;filename&gt; I'll merge this into the first merge's result      You can also provide a list of filenames (or regular expressions for      filenames) which should not be included by using the --exclude argument,      which takes a whitespace delimited list of files (or regular expressions      for files).      By default we add a comment showing references to file paths and line numbers      that contain the message, like this:          #: ./browser.py:32      You can suppress the line numbers by using the --no-line-numbers option.      The default might change in the future.  If you love line numbers, you can      add --line-numbers to be sure you keep them when you get a newer version      of i18ndude.  If you specify both options, the last one wins.        positional arguments:    path  options:    -h, --help            show this help message and exit    --wrap                Wrap long lines.    --no-wrap             Do not wrap long lines. This is the default.    --width NUMBER        Set output page width. Default is 79.    -p filename, --pot filename    -c domain, --create domain    -m filename, --merge filename    --merge2 filename    --exclude &quot;&lt;ignore1&gt; &lt;ignore2&gt; ...&quot;    --no-line-numbers    --line-numbersmerge-----::  usage: i18ndude merge [-h] [--wrap | --no-wrap] [--width NUMBER] -p filename                        -m filename [--merge2 filename]      Given a pot-file via the --pot option and a second      pot-file with the --merge &lt;filename&gt; option, I try to merge      these msgids into the target-pot file. If a msgid already      exists, I'll warn you and ignore that msgid.      If you provide a --merge2 &lt;filename&gt; I'll first merge this one      in addition to the first one.        options:    -h, --help            show this help message and exit    --wrap                Wrap long lines.    --no-wrap             Do not wrap long lines. This is the default.    --width NUMBER        Set output page width. Default is 79.    -p filename, --pot filename    -m filename, --merge filename    --merge2 filenamesync----::  usage: i18ndude sync [-h] [--wrap | --no-wrap] [--width NUMBER] -p potfilename                       pofilename [pofilename ...]      Given a pot-file with the --pot option and a list of po-files I'll      remove from the po files those message translations of which the      msgids are not in the pot-file and add messages that the pot-file has      but the po-file doesn't.        positional arguments:    pofilename  options:    -h, --help            show this help message and exit    --wrap                Wrap long lines.    --no-wrap             Do not wrap long lines. This is the default.    --width NUMBER        Set output page width. Default is 79.    -p potfilename, --pot potfilenamefilter------::  usage: i18ndude filter [-h] [--wrap | --no-wrap] [--width NUMBER] file1 file2      Given two pot-files I will write a copy of file1 to stdout with all      messages removed that are also in file2, i.e. where msgids match.        positional arguments:    file1    file2  options:    -h, --help      show this help message and exit    --wrap          Wrap long lines.    --no-wrap       Do not wrap long lines. This is the default.    --width NUMBER  Set output page width. Default is 79.admix-----::  usage: i18ndude admix [-h] [--wrap | --no-wrap] [--width NUMBER] file1 file2      Given two po-files I will look for translated entries in file2 that      are untranslated in file1. I add these translations (msgstrs) to      file1. Note that this will not affect the number of entries in file1.      The result will be on stdout.        positional arguments:    file1    file2  options:    -h, --help      show this help message and exit    --wrap          Wrap long lines.    --no-wrap       Do not wrap long lines. This is the default.    --width NUMBER  Set output page width. Default is 79.list----::  usage: i18ndude list [-h] -p product [product ...] [-t] [--tiered]      This will create a simple listing that displays how much of the      combined products pot's is translated for each language. Run this      from the directory containing the pot-files. The product name is      normally a domain name.      By default we show the languages of existing po files,      ordered by percentage.      With the --tiered option, we split the languages in three tiers or groups,      the first two with languages that Plone was traditionally translated in,      in a hardcoded order, followed by other languages.      This was the default output for years.        options:    -h, --help            show this help message and exit    -p product [product ...], --products product [product ...]    -t, --table           Output as html table    --tiered              Show in traditional three-tiered ordertrmerge-------::  usage: i18ndude trmerge [-h] [--wrap | --no-wrap] [--width NUMBER] [-i]                          [--no-override]                          file1 file2      Given two po-files I will update all translations from file2 into      file1. Missing translations are added.      If a translation was fuzzy in file1, and there is a nonempty translation      in file2, the fuzzy marker is removed.      Fuzzy translations in file2 are ignored.      The result will be on stdout.  If you want to update the first      file in place, use a temporary file, something like this:        i18ndude trmerge file1.po file2.po &gt; tmp_merge &amp;&amp; mv tmp_merge file1.po        positional arguments:    file1    file2  options:    -h, --help          show this help message and exit    --wrap              Wrap long lines.    --no-wrap           Do not wrap long lines. This is the default.    --width NUMBER      Set output page width. Default is 79.    -i, --ignore-extra  Ignore extra messages: do not add msgids that are not in                        the original po-file. Only update translations for                        existing msgids.    --no-override       Do not override translations, only add missing                        translations.Changelog=========.. You should *NOT* be adding new change log entries to this file.   You should create a file in the news directory instead.   For helpful instructions, please see:   https://github.com/plone/plone.releaser/blob/master/ADD-A-NEWS-ITEM.rst.. towncrier release notes start6.0.0 (2023-05-30)------------------Bug fixes:- Fix pre-commit integration.  [gforcada] (#1)6.0.0a1 (2023-05-08)--------------------Breaking changes:- Drop support for Python 2.  Require Python 3.8+ (works with PyPy3 as well).  [gforcada, maurits] (#50)New features:- Add pre-commit hook, for now only to find the strings not marked for translation.  [gforcada] (#50)Bug fixes:- Fix encoding problem on `prepare_cli_documentation` command.  [gforcada] (#101)5.5.0 (2022-09-19)------------------New features:- Add boolean ``--no-line-numbers`` option to ``rebuild-pot``.  Use this to prevent including line numbers in pot files.  The default is to still include them, so no behavior change.  The default could change in the future.  If you want to be sure to keep your line numbers in the future, use the new ``--line-numbers`` option.  [maurits] (#77)5.4.2 (2022-05-05)------------------Bug fixes:- Leading spaces in comments are kept stable. (#91)- Test on Python 3.10. No code changes needed.  [maurits] (#310)5.4.1 (2021-08-30)------------------Bug fixes:- Support the define syntax from Chameleon.  This is for the unpacking syntax, for example ``tal:define=&quot;(text,url) python:view.linkinfo&quot;``.  This avoids ``TALError: invalid define syntax`` when extracting messages from templates that use this.  [maurits] (#36)5.4.0 (2021-05-28)------------------New features:- ``i18ndude rebuild-pot --exclude=&quot;name1 name2&quot;`` now also accepts directory names for exclusion.  Excluding a directory name will exclude all files in and below the given directory,  but only if the directory name exactly matches a exclusion name (no globs, no substring match).  This change now also results in the hardcoded exclusions for 'tests' and 'docs' to actually work. (#86)Bug fixes:- Test with GitHub Actions instead of Travis CI.  [maurits] (#83)- Support Python 3.9.  No code changes were needed.  [maurits] (#83)- Do not raise AttributeError when content is None. (#84)5.3.4 (2020-06-29)------------------Bug fixes:- The list command was wrongly showing 100% translated when the translations were at 99%.  [vincentfretin] (#81)5.3.3 (2020-04-22)------------------Bug fixes:- Drop 3.4 and 3.5 support, which we were not testing since a year.  Test our 3.8 support.  [maurits] (#79)5.3.2 (2020-02-25)------------------Bug fixes:- Added hint in ``rebuild-pot`` help about unwanted domains in Python files.  [maurits] (#49)- Fixed filter command on Python 3.7, and possibly earlier.  [maurits] (#75)5.3.1 (2019-07-30)------------------Bug fixes:- Disallow non-word characters (but do allow dashes) in ``i18n:name``  attributes when running ``find-untranslated`` code analysis. [gyst] (#71)5.3.0 (2019-02-07)------------------New features:- Replaced buildout with pip for setting up test environment. No longer test on  Python 3.4 and 3.5. Do test on 3.7. Current test matrix: 2.7, 3.6, 3.7, pypy,  pypy3. [maurits] (#66)Bug fixes:- When no arguments are given, show the help. This fixes error on some Python  versions when calling 'bin/i18ndude' without arguments. [maurits] (#68)5.2.0 (2018-11-09)------------------New features:- Add check for untranslated aria-label attributes on all elements. [janjaapdriessen]Bug fixes:- Fixed ``plone.i18n`` import.  It was a conditional import to change the names of languages in the list, so nothing serious.  But it always failed.  [maurits]- In the readme, suggest ``export PYTHONIOENCODING=utf-8`` to fix ``UnicodeEncodeErrors``.  (Note: not ``UnicodeDecodeErrors``.)  Fixes `issue 55 &lt;https://github.com/collective/i18ndude/issues/55&gt;`_.  [maurits]5.1.0 (2018-03-23)------------------New features:- In the ``list`` command, show only languages with existing po files,  ordered by percentage.  A new ``--tiered`` option uses the traditional  behavior with languages in a specific order in three tiers.  [maurits]Bug fixes:- Sort files that we extract messages from.  On Linux they were already sorted, but not on Mac, leading to a test failure.  [maurits]- Fixed another possible UnicodeDecodeError in find-untranslated.  [maurits]- ``find-untranslated`` no longer complains about attributes with chameleon syntax.  An html tag with ``title=&quot;${context/Description}&quot;`` is no longer  marked as having an untranslated title tag.  Fixes `issue 53 &lt;https://github.com/collective/i18ndude/issues/53&gt;`_.  [maurits]5.0.2 (2018-03-12)------------------- Fixed some possible UnicodeDecodeErrors in find-untranslated.  Fixes `issue 52 &lt;https://github.com/collective/i18ndude/issues/52&gt;`_.  [maurits]5.0.1 (2018-03-05)------------------- Create universal Python wheel.  [maurits]5.0.0 (2018-03-05)------------------Breaking changes:- Drop support for python 2.6 and older. Retain python2.7 support.  [gyst]New features:- Support python 3.6, 3.5, 3.4, pypy and pypy3.  [gyst]Bug fixes:- Removed ``ordereddict`` and ```argparse`` dependencies completely.  [maurits]- Fixed many unicode/string/bytes handling problems.  There's probably still some unfixed that need finding, given that  test coverage is only 63%.  [gyst]Todo:- i18ndude/pygettext.py:159: DeprecationWarning: the imp module is deprecated in favour of importlib. This does not cause any breakage though.4.3 (2017-07-31)----------------New:- Support Chameleon repeat syntax in templates.  Fixes `issue #36 &lt;https://github.com/collective/i18ndude/issues/36&gt;`_.  [maurits]- Moved ``plone.i18n`` dependency to a ``plone`` extra.  This is only used for getting language names in the ``list`` command.  We now fall back to using the language name that is in the ``po`` files.  Fixes `issue #44 &lt;https://github.com/collective/i18ndude/issues/44&gt;`_.  [maurits]4.2 (2017-06-21)----------------New:- In ``find-untranslated``, do not report items that get replaced by Chameleon syntax.  So ``&lt;span&gt;${view/test}&lt;/span&gt;`` will no longer get flagged as missing a translation.  (Note that you still *can* add ``i18n:translate`` if it makes sense,  like Plone does for translating the dynamically calculated review state.)  [Netroxen, maurits]- Find untranslated attributes now also checks for 'placeholder' attributes on  input tags.4.1 (2016-12-02)----------------New:- Allow use of regular expressions for --exclude parameter. For example,  use ``*.py`` to exclude all python files. This doesn't break existing  behavior.  Do remember to use quotes around the expression.  [laulaz, maurits]4.0.1 (2015-12-03)------------------Fixes:- Fixed some reported line numbers in find-untranslated.  Fixes issue #34.  [maurits]4.0.0 (2015-12-03)------------------New:- Extract strings from zcml.  Issue #28  [maurits]- No longer print two blank lines at the end of .po and .pot files.  [maurits]- In the find-untranslated command, first try to parse a template as  xml, which is good for non-html files.  If that fails, try to parse  it as html with a little help from the lxml HTMLPaser, which handles  html5 code much better.  If that fails, use our trusty home grown  ``common.prepare_xml`` function, which treats everything as old  html.  Note that we still use ``xml.sax`` as the core parser here.  Issue #15  [maurits]- Ignore hidden files in the find-untranslated command.  Issue #29  [maurits]- Use lxml instead of xml.etree or elementtree for parsing  GenericSetup xml files.  [maurits]3.4.5 (2015-11-05)------------------New:- First try the original zope.tal parser.  Only when this fails we try  our own parser/generator.  [maurits]- Support Chameleon unnamed attributes without crashing.  For example:  ``tal:attributes=&quot;python:{'data-something': 'chameleon-only'}&quot;``  [maurits]- Support chameleon attributes tal:switch and tal:case.  Fixes issue #24.  [ale-rt]3.4.4 (2015-11-04)------------------Fixes:- Check ``tal:condition`` correctly when it is in a ``tal:something`` tag.  [maurits]- In ``find-untranslated`` only ignore ``tal:condition=&quot;nothing&quot;``,  not other conditions.  Fixes issue #16.  [maurits]- Improved the ``prepare_xml`` function.  This tries to work around  templates that miss the usual boiler plate, like  ``xmlns:i18n=&quot;http://xml.zope.org/namespaces/i18n&quot;``.  But there  were some silly errors in it.  This refs issue #16.  [maurits]3.4.3 (2015-09-01)------------------- Fix ``nosummary`` option from ``find-untranslated``.  It was reporting wrong information.  [gforcada]3.4.2 (2015-07-16)------------------- Fix encoding errors with wrapAndQuoteString.  [thet]- Pep8.  [thet]3.4.1 (2015-06-25)------------------- Releasing as Python wheel too.  [maurits]- Fixed wrapping when string contains newline.  Issue #13  [maurits]3.4.0 (2014-11-27)------------------- Drop Python 2.6 support.  It may still work, but the tests only run  on Python 2.7.  Note that it is fine to use one central i18ndude  command for all your projects, no matter what Python version they  are using.  [janjaapdriessen, maurits]- For the find-untranslated feature, add the possibility to mark a tag to be  ignored by setting the &quot;i18n:ignore&quot; attribute on the tag. Also works for  attributes with the &quot;i18n:ignore-attributes&quot; attribute.  [janjaapdriessen]3.3.5 (2014-08-05)------------------- Avoid AttributeError: 'NoneType' object has no attribute 'comments'  when a ``.po`` file is missing an empty msgid and msgstr near the  top.  This is fixed automatically, although it will override some  headers.  [maurits]3.3.4 (2014-07-02)------------------- Wrap first line correctly.  Fixes #9.  [gforcada]3.3.3 (2013-11-27)------------------- Package housekeeping.  [hvelarde]3.3.2 (2013-11-27)------------------- ``trmerge``: do not override when the mixin translation is fuzzy.  [maurits]- ``trmerge``: add ``--no-override`` argument.  This means: do not  override translations, only add missing translations.  [maurits]- ``trmerge``: add ``--ignore-extra`` option.  This ignores extra msgids  in the second po-file.  [maurits]3.3.1 (2013-10-18)------------------- Update script.py in some cases &quot;arguments.exclude&quot; is None.  [giacomos]- Fixed optional parameter exclude.  [shylux]3.3.0 (2013-10-13)------------------- Add command line documentation to long description of package.  [maurits]- Add options ``--wrap``, ``--no-wrap`` and ``--width=NUMBER`` to all  commands that write files.  Use these to determine whether long  lines are wrapped and at which width.  Default width is 79.  By  default we do NOT wrap, because we have never wrapped before.  This  may change in the future, so if you *really* want to be sure to not  wrap when using a future i18ndude version, you can add ``--no-wrap``  now.  https://github.com/collective/i18ndude/issues/3  [maurits]- Fix the ``list`` command to also work in a ``locales`` structure.  [maurits]- Fix an error in the ``merge`` command where the ``--merge`` option  would be used as value for the ``--merge2`` option as well, if that  option itself was unused.  This led to unneeded warnings.  [maurits]- The ``--create domain`` option of ``rebuild-pot`` is now optional.  If not given, i18ndude reads the domain from the given ``.pot``  file.  It was always optional, but the documentation did not show it  and it did not work.  [maurits]- Update the command line options handling.  You can now get the help  for individual commands by calling them with the ``--help`` option.  [maurits]- Return exit code 1 when the called function gives an error.  This  currently only has an effect when calling ``find-untranslated``.  https://github.com/collective/i18ndude/issues/1  [maurits]- Moved code to https://github.com/collective/i18ndude  [maurits]- Backslash escape added to msgid when it includes double quotes.  [taito]- Add trmerge command to merge po files. Custom tailored for transifex.  [do3cc]3.2.2 (2010-12-11)------------------- Encode key to utf-8 for the Merge-Warning message to avoid a  UnicodeEncodeError.  [mikerhodes]3.2.1 (2010-10-31)------------------- Fixed making POT file for DOUBLE BYTE strings on default.  [terapyon]3.2 (2010-09-04)----------------- Replaced internal odict implementation by the ordereddict package.  (implementation backported from Python 2.7)  [vincentfretin]3.1.3 (2010-09-04)------------------- Avoid UnicodeDecodeError when printing warning message in add().  [rnix]3.1.2 (2010-02-14)------------------- elementtree is only required for Python &lt; 2.5.  [vincentfretin]- Fixed tests (patch provided by John Trammell).  [vincentfretin]3.1.1 (2009-11-22)------------------- Strip &quot;src&quot; only once in the pathname for the comments.  Example: before it generated the following comment  &quot;#: archetypes.referencebrowserwidget/&quot;  which was not so useful. Now it generates  &quot;archetypes.referencebrowserwidget/src/archetypes/referencebrowserwidget/...&quot;  [vincentfretin]3.1 (2009-10-31)----------------- Support for explicit msgids in GSReader.  [vincentfretin]- Better handling of msgid references. Keep all the references in PTReader  and PYReader. In POWriter, normalize and sort the references, write only  MAX_OCCUR (default is 3) references.  You can set MAX_OCCUR=None if you want all references to be written to  the generated POT file. Only the first reference is written in case of  several references to the same file but with different line number.  [vincentfretin]- Depend now on zope.tal 3.5.2 to print a warning when msgid already exists  in catalog with a different default message. Simplified PTReader code.  Check for msgid with different default in GSReader, PYReader and in the  merged catalog (ptctl, pyctl, gsctl).  [vincentfretin]- Fix behaviour when dealing with broken xml files to be parsed.  [afd]3.0 (2008-11-13)----------------- No changes.  [hannosch]For older changes, see ``docs/ChangeLog``.</longdescription>
</pkgmetadata>