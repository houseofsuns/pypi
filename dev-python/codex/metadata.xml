<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>CodexA comic archive browser and reader.&lt;img src=&quot;codex/static_src/img/logo.svg&quot; style=&quot;height: 128px;width: 128px;border-radius: 128px;&quot; /&gt;## &lt;a name=&quot;features&quot;&gt;‚ú® Features&lt;/a&gt;- Codex is a web server.- Full text search of metadata and bookmarks.- Filter and sort on all comic metadata and unread status per user.- Browse a tree of publishers, imprints, series, volumes, or your own folder  hierarchy.- Read comics in a variety of aspect ratios that fit your screen.- Per user bookmarking. Per browser bookmarks even before you make an account.- Watches the filesystem and automatically imports new or changed comics.- Private Libraries accessible only to certain groups of users.- Reads CBZ, CBR, CBT, and PDF formatted comics.- Syndication with OPDS 1 &amp; 2, streaming, search and authentication.- Runs in 1GB of RAM, faster with more.### Examples- _Filter by_ Story Arc and Unread, _Order by_ Publish Date to create an event  reading list.- _Filter by_ Unread and _Order by_ Added Time to see your latest unread comics.- _Search by_ your favorite character to find their appearances across different  comics.## &lt;a name=&quot;demonstration&quot;&gt;üëÄ Demonstration&lt;/a&gt;You may browse a [live demo server](https://codex.sl8r.net/) to get a feel forCodex.## &lt;a name=&quot;news&quot;&gt;üìú News&lt;/a&gt;Codex has a &lt;a href=&quot;NEWS.md&quot;&gt;NEWS file&lt;/a&gt; to summarize changes that affectusers.## &lt;a name=&quot;installation&quot;&gt;üì¶ Installation&lt;/a&gt;### Install &amp; Run with DockerRun the official [Docker Image](https://hub.docker.com/r/ajslater/codex).Instructions for running the docker image are on the Docker Hub README. This isthe recommended way to run Codex.You'll then want to read the [Administration](#administration) section of thisdocument.### Install &amp; Run as a Native ApplicationYou can also run Codex as a natively installed python application with pip.#### Wheel Build DependenciesYou'll need to install these system dependencies before installing Codex.##### macOS```shbrew install jpeg libffi libyaml libzip openssl python unrar webp```##### Linux###### &lt;a href=&quot;#debian&quot;&gt;Debian&lt;/a&gt;Like Ubuntu, Mint, MX and others.```shapt install build-essential libffi-dev libjpeg-dev libssl-dev libwebp7 python3-pip zlib1g-dev```older releases may use the `libweb6` package instead.###### Debian on ARMThe python cryptography wheel needs compiling on rare architectures. Install theRust compiler.```shapt install cargo```###### Alpine```shapk add bsd-compat-headers build-base jpeg-dev libffi-dev libwebp openssl-dev yaml-dev zlib-dev```##### Install unrar Runtime Dependency on LinuxCodex requires unrar to read cbr formatted comic archives. Unrar is often notpackaged for Linux, but here are some instructions:[How to install unrar in Linux](https://www.unixtutorial.org/how-to-install-unrar-in-linux/)Unrar as packaged for Alpine Linux v3.14 seems to work on Alpine v3.15#### WindowsWindows users should use Docker to run Codex until this documentation section iscomplete.Codex can _probably_ Windows Linux Subsystem but I haven't done personallytested it yet. Try following the instructions for [Debian](#debian) above. Theremay be outstanding platform related bugs.Contributions to this documentation accepted on[the outstanding issue](https://github.com/ajslater/codex/issues/76) or discord.#### Install Codex with pipYou may now install Codex with pip```shpip3 install codex```#### Run Codex Nativelypip should install the codex binary on your path. Run```shcodex```and then navigate to &lt;http://localhost:9810/&gt;## &lt;a name=&quot;administration&quot;&gt;üëë Administration&lt;/a&gt;### Navigate to the Admin Panel- Click the hamburger menu ‚ò∞ to open the browser settings drawer.- Log in as the 'admin' user. The default administrator password is also  'admin'.- Navigate to the Admin Panel by clicking on its link in the browser settings  drawer after you have logged in.### Change the Admin passwordThe first thing you should do is log in as the admin user and change the adminpassword.- Navigate to the Admin Panel as described above.- Select the Users tab.- Change the admin user's password using the small lock button.- You may also change the admin user's name with the edit button.- You may create other users and grant them admin privileges by making them  staff.### Add Comic LibrariesThe second thing you will want to do is log in as an Administrator and add oneor more comic libraries.- Navigate to the Admin Panel as described above.- Select the Libraries tab in the Admin Panel- Add a Library with the &quot;+ LIBRARY&quot; button in the upper left.### Reset the admin passwordIf you forget all your superuser passwords, you may restore the original defaultadmin account by running codex with the `CODEX_RESET_ADMIN` environment variableset.```shCODEX_RESET_ADMIN=1 codex```or, if using Docker:```shdocker run -e CODEX_RESET_ADMIN=1 -v host-parent-dir/config:/config ajslater/codex```### Private LibrariesIn the Admin Panel you may configure private libraries that are only accessibleto specific groups.A library with _no_ groups is accessible to every user including anonymoususers.A library with _any_ groups is accessible only to users who are in those groups.Use the Groups admin panel to create groups and the Users admin panel to add andremove users to groups.### PDFsCodex only reads PDF metadata from the filename. If you decide to include PDFsin your comic library, I recommend taking time to rename your files so Codex canfind some metadata. Codex recognizes several file naming schemes. This one hasgood results:`{series} v{volume} #{issue} {title} ({year}) {ignored}.pdf`## &lt;a name=&quot;configuration&quot;&gt;üéõÔ∏è Configuration&lt;/a&gt;### Config DirThe default config directory is `config/` directly under the working directoryyou run codex from. You may specify an alternate config directory with theenvironment variable `CODEX_CONFIG_DIR`.The config directory contains a file named `hypercorn.toml` where you canspecify ports and bind addresses. If no `hypercorn.toml` is present Codex copiesa default one to that directory on startup.The default values for the config options are:```tomlbind = [&quot;0.0.0.0:9810&quot;]quick_bind = [&quot;0.0.0.0:9810&quot;]root_path = &quot;/codex&quot;```The config directory also holds the main sqlite database, the Whoosh searchindex, a Django cache and comic book cover thumbnails.### Environment Variables- `LOGLEVEL` will change how verbose codex's logging is. Valid values are  `ERROR`, `WARNING`, `INFO`, `DEBUG`. The default is `INFO`.- `TIMEZONE` or `TZ` will explicitly the timezone in long format (e.g.  `&quot;America/Los Angeles&quot;`). This is useful inside Docker because codex cannot  automatically detect the host machine's timezone.- `CODEX_CONFIG_DIR` will set the path to codex config directory. Defaults to  `$CWD/config`- `CODEX_RESET_ADMIN=1` will reset the admin user and its password to defaults  when codex starts.- `CODEX_SKIP_INTEGRITY_CHECK=1` will skip the database integrity repair that  runs when codex starts.- `CODEX_LOG_DIR` sets a custom directory for saving logfiles. Defaults to  `$CODEX_CONFIG_DIR/logs`- `CODEX_LOG_TO_FILE=0` will not log to files.- `CODEX_LOG_TO_CONSOLE=0` will not log to the console.### Reverse Proxy[nginx](https://nginx.org/) is often used as a TLS terminator and subpath proxy.Here's an example nginx config with a subpath named '/codex'.```nginx# HTTPproxy_set_header   Host $http_host;proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;proxy_set_header   X-Forwarded-Host $server_name;proxy_set_header   X-Forwarded-Port $server_port;proxy_set_header   X-Forwarded-Proto $scheme;proxy_set_header   X-Real-IP $remote_addr;proxy_set_header   X-Scheme $scheme;# Websocketsproxy_http_version 1.1;proxy_set_header   Upgrade $http_upgrade;proxy_set_header Connection &quot;Upgrade&quot; location /codex {  proxy_pass       http://codex:9810;  # Codex reads http basic authentication.  # If the nginx credentials are different than codex credentials use this line to  #   not forward the authorization.  proxy_set_header Authorization &quot;&quot;;}```Specify a reverse proxy sub path (if you have one) in `config/hypercorn.toml````tomlroot_path = &quot;/codex&quot;```#### Nginx Reverse Proxy 502 when container refreshesNginx requires a special trick to refresh dns when linked Docker containersrecreate. See this[nginx with dynamix upstreams](https://tenzer.dk/nginx-with-dynamic-upstreams/)article.### Restricted Memory EnvironmentsCodex can run with as little as 1GB available RAM. Large batch jobs ‚Äìlikeimporting and indexing tens of thousands of comics at once‚Äì will run faster themore memory is available to Codex. The biggest gains in speed happen when youincrease memory up to about 6GB. Codex batch jobs do get faster the more memoryyou give it above 6GB, but there are diminishing returns.If you run Codex in an admin restricted memory environment you might want totemporarily give codex a lot of memory to run a very large batch job and thenrestrict it for normal operation.## &lt;a name=&quot;usage&quot;&gt;üìñ Usage&lt;/a&gt;### üë§ Sessions &amp; AccountsOnce your administrator has added some comic libraries, you may browse and readcomics. Codex will remember your preferences, bookmarks and progress in thebrowser session. Codex destroys anonymous sessions and bookmarks after 60 days.To preserve these settings across browsers and after sessions expire, you mayregister an account with a username and password. You will have to contact youradministrator to reset your password if you forget it.### üóùÔ∏è API with Key AccessCodex has a limited number of API endpoints available with API Key Access. TheAPI Key is available on the admin/stats tab.### ·Ø§ OPDSCodex supports OPDS syndication and OPDS streaming. You may find the OPDS url inthe side drawer. It should take the form:`http(s)://host.tld(:9810)(/root_path)/opds/v1.2/`or`http(s)://host.tld(:9810)(/root_path)/opds/v2.0/`OPDS 2.0 support is experimental and not widely or well supported by clients.OPDS 2.0 book readers exist, but I am not yet aware of an OPDS 2.0 comic reader.#### Clients- iOS has [Panels](https://panels.app/), [KYBook 3](http://kybook-reader.com/),  and  [Chunky Comic Reader](https://apps.apple.com/us/app/chunky-comic-reader/id663567628)- Android has  [Moon+](https://play.google.com/store/apps/details?id=com.flyersoft.moonreader)  and  [Librera](https://play.google.com/store/apps/details?id=com.foobnix.pdf.reader)#### HTTP Basic AuthenticationIf you wish to access OPDS as your Codex User. You will have to add yourusername and password to the URL. Some OPDS clients do not asssist you withauthentication. In that case the OPDS url will look like:`http(s)://username:password@host.tld(:9810)(/root_path)/opds/v1.2/`#### Supported OPDS Specifications- [OPDS 1.2](https://specs.opds.io/opds-1.2.html)- [OPDS-PSE 1.2](https://github.com/anansi-project/opds-pse/blob/master/v1.2.md)- [OPDS Authentication 1.0](https://drafts.opds.io/authentication-for-opds-1.0.html)- [OpenSearch 1.1](https://github.com/dewitt/opensearch)## &lt;a name=&quot;troubleshooting&quot;&gt;ü©∫ Troubleshooting&lt;/a&gt;### üìí LogsCodex collects its logs in the `config/logs` directory. Take a look to see whatth e server is doing.You can change how much codex logs by setting the `LOGLEVEL` environmentvariable. By default this level is `INFO`. To see more verbose messages, runcodex like:```bashLOGLEVEL=DEBUG codex```### Watching Filesystem Events with DockerCodex tries to watch for filesystem events to instantly update your comiclibraries when they change on disk. But these native filesystem events are nottranslated between macOS &amp; Windows Docker hosts and the Docker Linux container.If you find that your installation is not updating to filesystem changesinstantly, you might try enabling polling for the affected libraries anddecreasing the `poll_every` value in the Admin console to a frequency that suitsyou.### Emergency Database RepairIf the database becomes corrupt, Codex includes a facitlity to rebuild thedatabase. Place a file named `rebuild_db` in your Codex config directory likeso:```shtouch config/rebuild_db```Shut down and restart Codex.The next time Codex starts it will back up the existing database and try torebuild it. The database lives in the config directory as the file`config/db.sqlite3`. If this procedure goes kablooey, you may recover theoriginal database at `config/db.sqlite3.backup`.## &lt;a name=&quot;alternatives-to-codex&quot;&gt;üìöAlternatives&lt;/a&gt;- [Kavita](https://www.kavitareader.com/) has light metadata filtering/editing,  supports comics, eBooks, and features for manga.- [Komga](https://komga.org/) has light metadata editing.- [Ubooquity](https://vaemendis.net/ubooquity/) reads both comics and eBooks.- [Mylar](https://github.com/mylar3/mylar3) is the best comic book manager which  also has a built in reader.- [Comictagger](https://github.com/comictagger/comictagger) is a comic metadata  editor. It comes with a powerful command line and desktop GUI.## &lt;a name=&quot;contributing&quot;&gt;ü§ù Contributing&lt;/a&gt;### &lt;a name=&quot;bug_reports&quot;&gt;üêõ Bug Reports&lt;/a&gt;Issues and feature requests are best filed on the[Github issue tracker](https://github.com/ajslater/codex/issues).### &lt;a name=&quot;out-of-scope&quot;&gt;üö´ Out of Scope&lt;/a&gt;- I have no intention of making this an eBook reader.- I think metadata editing would be better placed in a comic manager than a  reader.### &lt;a name=&quot;develop-codex&quot;&gt;üõ† Develop&lt;/a&gt;Codex is a Django Python webserver with a VueJS front end.`/codex/codex/` is the main django app which provides the webserver anddatabase.`/codex/frontend/` is where the vuejs frontend lives.Most of Codex development is now controlled through the Makefile. Type `make`for a list of commands.## &lt;a name=&quot;discord&quot;&gt;üí¨ Support&lt;/a&gt;By the generosity of the good people of[Mylar](https://github.com/mylar3/mylar3), I and other Codex users answerquestions on the [Mylar Discord](https://discord.gg/6UG94R7E8T). Please use the`#codex-support` channel to ask for help with Codex.## &lt;a name=&quot;links&quot;&gt;üîó Links&lt;/a&gt;- [Docker Image](https://hub.docker.com/r/ajslater/codex)- [PyPi Package](https://pypi.org/project/codex/)- [GitHub Project](https://github.com/ajslater/codex/)## &lt;a name=&quot;special-thanks&quot;&gt;üôèüèª Special Thanks&lt;/a&gt;- Thanks to [Aur√©lien Mazurie](https://pypi.org/user/ajmazurie/) for allowing me  to use the PyPi name 'codex'.- Thanks to the good people of  [#mylar](https://github.com/mylar3/mylar3#live-support--conversation) for  continuous feedback and comic ecosystem education.## &lt;a name=&quot;enjoy&quot;&gt;üòä Enjoy&lt;/a&gt;![These simple people have managed to tap into the spiritual forces that mystics and yogis spend literal lifetimes seeking. I feel... ...I feel...](strange.jpg)</longdescription>
</pkgmetadata>