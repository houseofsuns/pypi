<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>&lt;p align=&quot;center&quot;&gt;    &lt;a href=&quot;https://datafold.com/&quot;&gt;&lt;img alt=&quot;Datafold&quot; src=&quot;https://user-images.githubusercontent.com/1799931/196497110-d3de1113-a97f-4322-b531-026d859b867a.png&quot; width=&quot;30%&quot; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;h2 align=&quot;center&quot;&gt;data-diff: Compare datasets fast, within or across SQL databases![data-diff-logo](docs/data-diff-logo.png)&lt;/h2&gt;&lt;br&gt;# Use Cases## Data Migration &amp; Replication TestingCompare source to target and check for discrepancies when moving data between systems:- Migrating to a new data warehouse (e.g., Oracle &gt; Snowflake)- Converting SQL to a new transformation framework (e.g., stored procedures &gt; dbt)- Continuously replicating data from an OLTP DB to OLAP DWH (e.g., MySQL &gt; Redshift)## Data Development TestingTest SQL code and preview changes by comparing development/staging environment data to production:1. Make a change to some SQL code2. Run the SQL code to create a new dataset3. Compare the dataset with its production version or another iteration  &lt;p align=&quot;left&quot;&gt;  &lt;img alt=&quot;dbt&quot; src=&quot;https://seeklogo.com/images/D/dbt-logo-E4B0ED72A2-seeklogo.com.png&quot; width=&quot;10%&quot; /&gt;  &lt;/p&gt;&lt;details&gt;&lt;summary&gt; data-diff integrates with dbt Core to seamlessly compare local development to production datasets &lt;/summary&gt;![data-development-testing](docs/development_testing.png)&lt;/details&gt;&gt; [dbt Cloud users should check out Datafold's out-of-the-box deployment testing integration](https://www.datafold.com/data-deployment-testing):eyes: **Watch [4-min demo video](https://www.loom.com/share/ad3df969ba6b4298939efb2fbcc14cde)****[Get started with data-diff &amp; dbt](https://docs.datafold.com/development_testing/open_source)**Also available in a [VS Code Extension](https://marketplace.visualstudio.com/items?itemName=Datafold.datafold-vscode)Reach out on the dbt Slack in [#tools-datafold](https://getdbt.slack.com/archives/C03D25A92UU) for advice and support# How it worksWhen comparing the data, `data-diff` utilizes the resources of the underlying databases as much as possible. It has two primary modes of comparison:## `joindiff`- Recommended for comparing data within the same database- Uses the outer join operation to diff the rows as efficiently as possible within the same database- Fully relies on the underlying database engine for computation- Requires both datasets to be queryable with a single SQL query- Time complexity approximates JOIN operation and is largely independent of the number of differences in the dataset## `hashdiff`- Recommended for comparing datasets across different databases- Can also be helpful in diffing very large tables with few expected differences within the same database- Employs a divide-and-conquer algorithm based on hashing and binary search- Can diff data across distinct database engines, e.g., PostgreSQL &lt;&gt; Snowflake- Time complexity approximates COUNT(*) operation when there are few differences- Performance degrades when datasets have a large number of differencesMore information about the algorithm and performance considerations can be found [here](https://github.com/datafold/data-diff/blob/master/docs/technical-explanation.md)# Get started## Validating dbt model changes between dev and prod‚ö° Looking to use `data-diff` in dbt development? Head over to [our `data-diff` + `dbt` documentation](https://docs.datafold.com/development_testing/open_source/) to get started!## Compare data tables between databasesüîÄ To compare data between databases, install `data-diff` with specific database adapters, e.g.:```pip install data-diff 'data-diff[postgresql,snowflake]' -U```Run `data-diff` with connection URIs. In the following example, we compare tables between PostgreSQL and Snowflake using the hashdiff algorithm:```bashdata-diff \  postgresql://&lt;username&gt;:'&lt;password&gt;'@localhost:5432/&lt;database&gt; \  &lt;table&gt; \  &quot;snowflake://&lt;username&gt;:&lt;password&gt;@&lt;account&gt;/&lt;DATABASE&gt;/&lt;SCHEMA&gt;?warehouse=&lt;WAREHOUSE&gt;&amp;role=&lt;ROLE&gt;&quot; \  &lt;TABLE&gt; \  -k &lt;primary key column&gt; \  -c &lt;columns to compare&gt; \  -w &lt;filter condition&gt;```Run `data-diff` with a `toml` configuration file. In the following example, we compare tables between MotherDuck(hosted DuckDB) and Snowflake using the hashdiff algorithm:```toml## DATABASE CONNECTION ##[database.duckdb_connection]   driver = &quot;duckdb&quot;  # filepath = &quot;datafold_demo.duckdb&quot; # local duckdb file example  # filepath = &quot;md:&quot; # default motherduck connection example  filepath = &quot;md:datafold_demo?motherduck_token=${motherduck_token}&quot; # API token recommended for motherduck connection  database = &quot;datafold_demo&quot;[database.snowflake_connection]  driver = &quot;snowflake&quot;  database = &quot;DEV&quot;  user = &quot;sung&quot;  password = &quot;${SNOWFLAKE_PASSWORD}&quot; # or &quot;&lt;PASSWORD_STRING&gt;&quot;  # the info below is only required for snowflake  account = &quot;${ACCOUNT}&quot; # by33919  schema = &quot;DEVELOPMENT&quot;  warehouse = &quot;DEMO&quot;  role = &quot;DEMO_ROLE&quot;## RUN PARAMETERS ##[run.default]  verbose = true## EXAMPLE DATA DIFF JOB ##[run.demo_xdb_diff]  # Source 1 (&quot;left&quot;)  1.database = &quot;duckdb_connection&quot;  1.table = &quot;development.raw_orders&quot;  # Source 2 (&quot;right&quot;)  2.database = &quot;snowflake_connection&quot;  2.table = &quot;RAW_ORDERS&quot; # note that snowflake table names are case-sensitive  verbose = false``````bash# export relevant environment variables, example belowexport motherduck_token=&lt;MOTHERDUCK_TOKEN&gt;# run the configured data-diff jobdata-diff --conf datadiff.toml \  --run demo_xdb_diff \  -k &quot;id&quot; \  -c status# output example- 1, completed+ 1, returned```Check out [documentation](https://docs.datafold.com/reference/open_source/cli) for the full command reference.# Supported databases| Database      | Status | Connection string                                                                                                                   ||---------------|-------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|| PostgreSQL &gt;=10 |  üü¢   | `postgresql://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:5432/&lt;database&gt;`                                                                             || MySQL         |  üü¢     | `mysql://&lt;user&gt;:&lt;password&gt;@&lt;hostname&gt;:5432/&lt;database&gt;`                                                                              || Snowflake     |  üü¢     | `&quot;snowflake://&lt;user&gt;[:&lt;password&gt;]@&lt;account&gt;/&lt;database&gt;/&lt;SCHEMA&gt;?warehouse=&lt;WAREHOUSE&gt;&amp;role=&lt;role&gt;[&amp;authenticator=externalbrowser]&quot;` || BigQuery      |  üü¢     | `bigquery://&lt;project&gt;/&lt;dataset&gt;`                                                                                                    || Redshift      |  üü¢     | `redshift://&lt;username&gt;:&lt;password&gt;@&lt;hostname&gt;:5439/&lt;database&gt;`                                                                       || DuckDB        |  üü¢   | `duckdb://&lt;dbname&gt;@&lt;filepath&gt;`                                                                                          || MotherDuck        |  üü¢   | `duckdb://&lt;dbname&gt;@&lt;filepath&gt;`                                                                                                   || Oracle        |  üü°   | `oracle://&lt;username&gt;:&lt;password&gt;@&lt;hostname&gt;/servive_or_sid`                                                                          || Presto        |  üü°   | `presto://&lt;username&gt;:&lt;password&gt;@&lt;hostname&gt;:8080/&lt;database&gt;`                                                                         || Databricks    |  üü°   | `databricks://&lt;http_path&gt;:&lt;access_token&gt;@&lt;server_hostname&gt;/&lt;catalog&gt;/&lt;schema&gt;`                                                      || Trino         |  üü°   | `trino://&lt;username&gt;:&lt;password&gt;@&lt;hostname&gt;:8080/&lt;database&gt;`                                                                          || Clickhouse    |  üü°   | `clickhouse://&lt;username&gt;:&lt;password&gt;@&lt;hostname&gt;:9000/&lt;database&gt;`                                                                     || Vertica       |  üü°   | `vertica://&lt;username&gt;:&lt;password&gt;@&lt;hostname&gt;:5433/&lt;database&gt;`                                                                        || ElasticSearch |  üìù    |                                                                                                                                     || Planetscale   |  üìù    |                                                                                                                                     || Pinot         |  üìù    |                                                                                                                                     || Druid         |  üìù    |                                                                                                                                     || Kafka         |  üìù    |                                                                                                                                     || SQLite        |  üìù    |                                                                                                                                     |* üü¢: Implemented and thoroughly tested.* üü°: Implemented, but not thoroughly tested yet.* ‚è≥: Implementation in progress.* üìù: Implementation planned. Contributions welcome.Your database not listed here?- Contribute a [new database adapter](https://github.com/datafold/data-diff/blob/master/docs/new-database-driver-guide.rst) ‚Äì¬†we accept pull requests!- [Get in touch](https://www.datafold.com/demo) about enterprise support and adding new adapters and features&lt;br&gt;## ContributorsWe thank everyone who contributed so far!&lt;a href=&quot;https://github.com/datafold/data-diff/graphs/contributors&quot;&gt;  &lt;img src=&quot;https://contributors-img.web.app/image?repo=datafold/data-diff&quot; /&gt;&lt;/a&gt;&lt;br&gt;## Analytics* [Usage Analytics &amp; Data Privacy](https://github.com/datafold/data-diff/blob/master/docs/usage_analytics.md)&lt;br&gt;## LicenseThis project is licensed under the terms of the [MIT License](https://github.com/datafold/data-diff/blob/master/LICENSE).</longdescription>
</pkgmetadata>