<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription># configzen `v0.10.0`_configzen_ ‚Äì easily create and maintain complex, statically-typed configurations with validation in Python.It's important to keep your configuration safe and consistent. Give a shot to _configzen_ üöÄ‚≠ê Supports **Python 3.8 or above**,&lt;br&gt;‚≠ê Is **fully typed**,&lt;br&gt;‚≠ê Supports **YAML, JSON, TOML, INI, XML, ConfigObj, BSON, CBOR, Amazon Ion, properties** and **shellvars**,&lt;br&gt;‚≠ê Supports **reading and writing configuration files**, fully or partially, with the ability to preserve the original file structure (without comments[^1]),&lt;br&gt;‚≠ê Supports **configuration preprocessing** (extending, including and copying configuration files without the need to change the code),&lt;br&gt;‚≠ê Supports **variable interpolation** (runtime value substitution),&lt;br&gt;‚≠ê Supports **modular configuration with type validation** (wrapping runtime Python modules in-place and outside them),&lt;br&gt;‚≠ê Supports **synchronous and asynchronous file operations**,&lt;br&gt;‚≠ê Supports loading configuration from **environment variables and secret files**.&lt;br&gt;While being built on top of [pydantic](https://docs.pydantic.dev/1.10/), _configzen_ inherits most of its features, including[data validation](https://docs.pydantic.dev/1.10/usage/validators/), [schema generation](https://docs.pydantic.dev/1.10/usage/schema/),[custom data types](https://docs.pydantic.dev/1.10/usage/types/#arbitrary-types-allowed), good integration with [Rich](https://docs.pydantic.dev/1.10/usage/rich/), and more.Learn more below.## Features### Managing contentHaving a YAML configuration file like this:```yaml# database.ymlhost: 127.0.0.1port: 5432user: postgres```You can create a _configzen_ configuration model for it like this:```python# model.pyfrom ipaddress import IPv4Address, IPv6Addressfrom configzen import ConfigField, ConfigMeta, ConfigModelclass DatabaseConfig(ConfigModel):    host: IPv4Address | IPv6Address    port: int    user: str    password: str = ConfigField(exclude=True)    class Config(ConfigMeta):        resource = &quot;database.yml&quot;        env_prefix = &quot;DB_&quot;db_config = DatabaseConfig.load()```And you can load your configuration from a file as well as from the environment variables`DB_HOST`, `DB_PORT`, `DB_USER` and `DB_PASSWORD`. Since `password` is a field created withthe option `exclude=True`, it will not be included in the configuration's exported data: thatguarantees that your password does never leak into `database.yml` on save ‚Äì but you may still pass itthrough an environment variable (here ‚Äì the mentioned `DB_PASSWORD`). Secret files are also supported,see [the pydantic documentation](https://docs.pydantic.dev/latest/usage/settings/#secret-support)for more information.[pydantic](https://docs.pydantic.dev/latest/) will naturally take care of parsing and validating the loaded data.Configuration models inherit from the `pydantic.BaseSettings` class, so you can use all of its features:schema generation, type conversion, validation, etc.There are additional features brought to you by _configzen_ worth checking out, though.You can use the `db_config` object defined above to access the configuration values:```python&gt;&gt;&gt; db_config.hostIPv4Address('127.0.0.1')```modify them, if the pydantic model validation allowsit ([`&lt;Your model&gt;.Config.validate_assignment`](https://docs.pydantic.dev/latest/usage/model_config/#options) willbe `True` by default):```python&gt;&gt;&gt; db_config.host = &quot;0.0.0.0&quot;&gt;&gt;&gt; db_config.hostIPv4Address('0.0.0.0')```as well as reload particular values, without touching the rest of the configuration:```python&gt;&gt;&gt; db_config.at(&quot;port&quot;).reload()5432&gt;&gt;&gt; db_configDatabaseConfig(host=IPv4Address('0.0.0.0'), port=5432, user='postgres', password='password')&gt;&gt;&gt; db_config.at(&quot;host&quot;).reload()IPv4Address('127.0.0.1')&gt;&gt;&gt; db_configDatabaseConfig(host=IPv4Address('127.0.0.1'), port=5432, user='postgres', password='password')```or reload the whole configuration:```python&gt;&gt;&gt; db_config.port = 1234&gt;&gt;&gt; db_config.reload()DatabaseConfig(host=IPv4Address('127.0.0.1'), port=5432, user='postgres', password='password')```or save a particular value, without touching the rest of the configuration:```python&gt;&gt;&gt; db_config.host = &quot;0.0.0.0&quot;&gt;&gt;&gt; db_config.port = 443&gt;&gt;&gt; db_configDatabaseConfig(host=IPv4Address('0.0.0.0'), port=443, user='postgres', password='password')&gt;&gt;&gt; db_config.at(&quot;host&quot;).save()40&gt;&gt;&gt; db_config.reload()DatabaseConfig(host=IPv4Address('0.0.0.0'), port=5432, user='postgres', password='password')```or save the whole configuration:```python&gt;&gt;&gt; db_config.save()39```### PreprocessingTo see supported preprocessing directives,see [Supported preprocessing directives](#supported-preprocessing-directives).#### Basic usageHaving a base configuration file like this (`base.json`):```json{  &quot;i18n&quot;: {    &quot;language&quot;: &quot;en&quot;,    &quot;timezone&quot;: &quot;UTC&quot;  },  &quot;app&quot;: {    &quot;debug&quot;: true,    &quot;expose&quot;: 8000  }}```create another configuration file like this, overriding desired sections as needed:```yaml# production.yml^extend: base.json+app:  debug: false```and load the `production.yml` configuration file. No explicit changes to the code indicating the use of the `base.json`file are needed._Note: Using `+` in front of a key will update the section already defined at that key,instead of overwriting it entirely._Notice how configuration file formats do not matter in _configzen_: you canextend JSON configurations with YAML, but that might be as well any other formatamong the supported ones (see the [Supported file formats](#supported-file-formats) section).The above example is equivalent to as if you used:```yaml# production.ymli18n:  language: en  timezone: UTCapp:  debug: false  expose: 8000```but with a significant difference: when you save the above configuration, the `^extend` relation to the baseconfiguration file `base.json` is preserved.This basically means that changes made in the base configuration file will apply to the configuration model instanceloaded from the `^extend`-ing configuration file.Any changes made locally to the model will result in `+` sections being automatically added to the exportedconfiguration data.#### Supported preprocessing directives| Directive  | Is the referenced file preprocessed? | Is the directive preserved on export? || ---------- | ------------------------------------ | ------------------------------------- || `^extend`  | Yes                                  | Yes                                   || `^include` | Yes                                  | No                                    || `^copy`    | No                                   | No                                    |### Interpolation#### Basic interpolationYou can use interpolation in your configuration files:```yamlcpu:  cores: 4num_workers: ${cpu.cores}``````python&gt;&gt;&gt; from configzen import ConfigModel...&gt;&gt;&gt; class CPUConfig(ConfigModel):...     cores: int...&gt;&gt;&gt; class AppConfig(ConfigModel):...     cpu: CPUConfig...     num_workers: int...&gt;&gt;&gt; app_config = AppConfig.load(&quot;app.yml&quot;)&gt;&gt;&gt; app_configAppConfig(cpu=CPUConfig(cores=4), num_workers=4)```#### Reusable configuration with namespacesYou can share independent configuration models as namespaces through inclusion:```yaml# database.ymlhost: ${app_config::db_host}port: ${app_config::expose}``````yaml# app.ymldb_host: localhostexpose: 8000``````python&gt;&gt;&gt; from configzen import ConfigModel, include&gt;&gt;&gt; from ipaddress import IPv4Address&gt;&gt;&gt;&gt;&gt;&gt; @include(&quot;app_config&quot;)... class DatabaseConfig(ConfigModel):...     host: IPv4Address...     port: int...&gt;&gt;&gt; class AppConfig(ConfigModel):...     db_host: str...     expose: int...&gt;&gt;&gt; app_config = AppConfig.load(&quot;app.yml&quot;)&gt;&gt;&gt; app_configAppConfig(db_host='localhost', expose=8000)&gt;&gt;&gt; db_config = DatabaseConfig.load(&quot;database.yml&quot;)&gt;&gt;&gt; db_configDatabaseConfig(host=IPv4Address('127.0.0.1'), port=8000)&gt;&gt;&gt; db_config.dict(){'host': IPv4Address('127.0.0.1'), 'port': 8000}&gt;&gt;&gt; db_config.export()  # used when saving{'host': '${app_config::db_host}', 'port': '${app_config::expose}'}```You do not have to pass a variable name to `@include`, though. `@include` lets you overwrite the main interpolation namespaceor one with a separate name (here: `app_config`) with configuration models, dictionaries and their factories.### Modular configuration#### Wrapping modules in-placeYou can wrap modules in-place with configuration models:1) Without writing a model class:```python# config.pyfrom configzen import ConfigModule# Annotate config fieldsHOST: str = &quot;localhost&quot;PORT: int = 8000ConfigModule.wrap_this_module()```2) With a model class:```python# config.pyfrom configzen import ConfigModel# Annotations are optionalHOST = &quot;localhost&quot;PORT = 8000class AppConfig(ConfigModel):    HOST: str    PORT: intAppConfig.wrap_this_module()```Now values `HOST` and `PORT` will be validated as `str` and `int` data types, respectively:```python&gt;&gt;&gt; import config  # &lt;configuration module 'config' from 'config.py'&gt;&gt;&gt;&gt; config.HOST'localhost'&gt;&gt;&gt; config.PORT8000&gt;&gt;&gt; config.PORT = &quot;8000&quot;&gt;&gt;&gt; config.PORT8000&gt;&gt;&gt; config.PORT = &quot;abc&quot;Traceback (most recent call last):  ...```#### Wrapping interchangeable modulesYou can wrap modules outside them with configuration models:```python# setup.pyfrom configzen import ConfigModelclass AppConfig(ConfigModel):    HOST: str = &quot;localhost&quot;    PORT: int = 8000config_model = AppConfig.wrap_module(&quot;config&quot;)``````py# config.pyHOST: str = &quot;0.0.0.0&quot;PORT: int = 443``````python&gt;&gt;&gt; from setup import config_model&gt;&gt;&gt; config_model.HOST'0.0.0.0'&gt;&gt;&gt; config_model.PORT443&gt;&gt;&gt; config_model.PORT = &quot;8000&quot;&gt;&gt;&gt; config_model.PORT8000&gt;&gt;&gt; import config&gt;&gt;&gt; config.HOST'0.0.0.0'&gt;&gt;&gt; config.PORT8000```## Supported file formats_configzen_ uses [anyconfig](https://pypi.org/project/anyconfig/) to serialize and deserialize data and does not operate on any protocol-specific entities.As an example result, comments in your configuration files are lost on save[^1], but you can exchange file formats without any hassle.The following table shows the supported file formats, their requirements, file extensions, and the backend libraries used to accomplish this goal.| File Format                                                                         | To use, install:              | Recognized File Extension(s) | Backend Library                                                                                       || ----------------------------------------------------------------------------------- | ----------------------------- | ---------------------------- | ----------------------------------------------------------------------------------------------------- || [JSON](https://en.wikipedia.org/wiki/JSON)                                          | -                             | `json`                       | [json](https://docs.python.org/3/library/json.html) (standard library)                                || [INI](https://en.wikipedia.org/wiki/INI_file)                                       | -                             | `ini`, `cfg`, `conf`         | [configparser](https://docs.python.org/3/library/configparser.html) (standard library)                || [TOML](https://en.wikipedia.org/wiki/TOML)                                          | -                             | `toml`                       | [toml](https://pypi.python.org/pypi/toml)                                                             || [YAML](https://yaml.org)                                                            | -                             | `yaml`, `yml`                | [pyyaml](https://pypi.python.org/pypi/PyYAML) / [ruamel.yaml](https://pypi.python.org/pypi/ruamel.yaml) || [XML](https://en.wikipedia.org/wiki/XML)                                            | -                             | `xml`                        | [xml](https://docs.python.org/3/library/xml.html) (standard library)                                  || [ConfigObj](https://configobj.readthedocs.io/en/latest/configobj.html#introduction) | `anyconfig-configobj-backend` | `configobj`                  | [configobj](https://pypi.org/project/configobj/)                                              || [BSON](https://en.wikipedia.org/wiki/BSON)                                          | `anyconfig-bson-backend`      | `bson`                       | [bson](https://pypi.org/project/bson/)                                                                || [CBOR](https://cbor.io/) ([RFC 8949](https://www.rfc-editor.org/rfc/rfc8949))       | `anyconfig-cbor2-backend`     | `cbor`, `cbor2`              | [cbor2](https://pypi.org/project/cbor2/)                                                              || [Amazon Ion](https://en.wikipedia.org/wiki/Ion_(serialization_format))              | `anyconfig-ion-backend`       | `ion`                        | [ion](https://pypi.org/project/amazon.ion/)                                                           || CBOR (deprecated, [RFC 7049](https://www.rfc-editor.org/rfc/rfc7049))               | `anyconfig-cbor-backend`      | `cbor`                       | [cbor](https://pypi.org/project/cbor/)                                                                || properties                                                                          | -                             | `properties`                 | (native)                                                                                              || shellvars                                                                           | -                             | `shellvars`                  | (native)                                                                                              |&lt;!-- Add msgpack when it works --&gt;If your file extension is not recognized, you can register your own file extension by calling `ConfigAgent.register_file_extension(file_extension, parser_name)`.If your favorite backend library is not supported, please let me know by reporting it as an issue.Using custom backends is to be supported in the future.[^1]: A suggested alternative for comments is to use the `description` parameter in your configuration models' fields: `ConfigField(description=...)`.The provided field descriptions are included in JSON schemas generated by the default implementation of the `ConfigModel.schema()` method.## SetupIn order to use _configzen_ in your project, install it with your package manager, for example `pip`:```bashpip install configzen```If you are willing to contribute to _configzen_, which is awesome, simply clone this repository and install itsdependencies with [poetry](https://python-poetry.org/):```bashpoetry install --with dev --all-extras```After that, install the [pre-commit](https://pre-commit.com/) hooks:```bashpre-commit install --hook-type pre-commit --hook-type pre-push```You might also need to install required stubs. First, activate your virtual environment:```bashpoetry shell```and run (on Linux or [PowerShell](https://learn.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.3) 7.0+):```bashmypy configzen/ || (echo yes | mypy --install-types)```or, if you are using an older version of PowerShell:```powershellmypy configzen/; if (-not $?) { echo yes | mypy --install-types }```_Note: Using [WSL2](https://learn.microsoft.com/en-us/windows/wsl/install) + [pyenv](https://github.com/pyenv/pyenv#readme) (with Python 3.8) for developing configzen is strongly recommended in case you use Windows._And you are good to go. üöÄContributions are welcome! Feel free to [open an issue](https://github.com/bswck/configzen/issues/new/choose) wheneveryou encounter a bug or have a feature request or [submit a pull request](https://github.com/bswck/configzen/compare) with your changes.## License[MIT License](https://choosealicense.com/licenses/mit/)## Credits* [@Lunarmagpie](https://github.com/Lunarmagpie) for _crucial_ design tips and ideas.## Author* [bswck](https://github.com/bswck) (contact: bswck.dev@gmail.com or via [Discord](https://discord.com/) `bswck`)</longdescription>
</pkgmetadata>