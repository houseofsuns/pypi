<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>unoserver=========Using LibreOffice as a server for converting documents.Overview--------Using LibreOffice to convert documents is easy, you can use a command like this toconvert a file to PDF, for example::    $ libreoffice --headless --convert-to pdf ~/Documents/MyDocument.odfHowever, that will load LibreOffice into memory, convert a file and then exit LibreOffice,which means that the next time you convert a document LibreOffice needs to be loaded intomemory again.To avoid that, LibreOffice has a listener mode, where it can listen for commands via a port,and load and convert documents without exiting and reloading the software. This lowers theCPU load when converting many documents with somewhere between 50% and 75%, meaning you canconvert somewhere between two and four times as many documents in the same time using a listener.Unoserver contains two commands to help you do this, `unoserver` which starts a listener on thespecified IP interface and port, and `unoconverter` which will connect to a listener and ask itto convert a document.Installation------------NB! Windows and Mac support is as of yet untested.Unoserver needs to be installed by and run with the same Python installation that LibreOffice uses.On Unix this usually means you can just install it with::   $ sudo pip install unoserverIf you have multiple versions of LibreOffice installed, you need to install it for each one.Usually each LibreOffice install will have it's own `python` executable and you need to run`pip` with that executable::  $ sudo /full/path/to/python -m pip install unoserverTo find all Python installations that have the relevant LibreOffice libraries installed,you can run a script called `find_uno.py`::  wget -O find_uno.py https://gist.githubusercontent.com/regebro/036da022dc7d5241a0ee97efdf1458eb/raw/find_uno.py  python3 find_uno.pyThis should give an output similar to this::  Trying python found at /usr/bin/python3... Success!  Trying python found at /opt/libreoffice7.1/program/python... Success!  Found 2 Pythons with Libreoffice libraries:  /usr/bin/python3  /opt/libreoffice7.1/program/pythonThe `/usr/bin/python3` binary will be the system Python used for versions ofLibreoffice installed by the system package manager. The Pythons installedunder `/opt/` will be Python versions that come with official LibreOfficedistributions.To install on such distributions, do the following::  $ wget https://bootstrap.pypa.io/get-pip.py  $ sudo /path/to/python get-pip.py  $ sudo /path/to/python -m pip install unoserverYou can also install it in a virtualenv, if you are using the system Pythonfor that virtualenv, and specify the ``--system-site-packages`` parameter::  $ virtualenv --python=/usr/bin/python3 --system-site-packages virtenv  $ virtenv/bin/pip install unoserverWindows and Mac installs aren't officially supported yet, but on Windows thepaths to the LibreOffice Python executable are usually in locations such as`C:\\Program Files (x86)\\LibreOffice\\python.exe`. On Mac it can be forexample `/Applications/LibreOffice.app/Contents/python`.Usage-----Installing unoserver installs two scripts, `unoserver` and `unoconverter`.Both can also be run as modules with `python3 -m unoserver.server` and`python3 -m unoserver.converter` with the same arguments as the main scripts.Unoserver~~~~~~~~~``unoserver [-h] [--interface INTERFACE] [--port PORT] [--daemon] [--executable EXECUTABLE]``* `--interface`: The interface used by the server, defaults to &quot;localhost&quot;* `--port`: The port used by the server, defaults to &quot;2002&quot;* `--daemon`:  Deamonize the server* `--executable`: The path to the LibreOffice executableUnoconvert~~~~~~~~~~``unoconvert [-h] [--convert-to CONVERT_TO] [--filter FILTER_NAME] [--interface INTERFACE] [--port PORT] infile outfile``* `infile`: The path to the file to be converted (use - for stdin)* `outfile`: The path to the converted file (use - for stdout)* `--convert-to`: The file type/extension of the output file (ex pdf). Required when using stdout* `--filter`: The export filter to use when converting. It is selected automatically if not specified.* `--interface`: The interface used by the server, defaults to &quot;localhost&quot;* `--port`: The port used by the server, defaults to &quot;2002&quot;Development and Testing-----------------------1. Clone the repo from `https://github.com/unoconv/unoserver`.2. Setup a virtualenv::    $ virtualenv --system-site-packages ve    $ ve/bin/pip install -e .[devenv]3. Run tests::    $ ve/bin/pytest tests4. Run `flake8` linting:    $ ve/bin/flake8 src testsComparison with `unoconv`-------------------------Unoserver started as a rewrite, and hopefully a replacement to `unoconv`, a module with supportfor using LibreOffice as a listener to convert documents.Differences for the user~~~~~~~~~~~~~~~~~~~~~~~~* Easier install for system versions of LibreOffice. On Linux, the packaged versions of LibreOffice  typically uses the system Python, making it easy to install `unoserver` with a simple  `sudo pip install unoserver` command.* Separate commands for server and client. The client no longer tries to start a listener and then  close it after conversion if it can't find a listener. Instead the new `unoconverter` client  requires the `unoserver` to be started. This makes it less practical for one-off converts,  but as mentioned that can easily be done with LibreOffice itself.* The `unoserver` listener does not prevent you from using LibreOffice as a normal user, while the  `unoconv` listener would block you from starting LibreOffice to open a document normally.* You should be able to on a multi-core machine run several `unoservers` with different ports.  There is however no support for any form of load balancing in `unoserver`, you would have to  implement that yourself in your usage of `unoconverter`.* Only LibreOffice is officially supported. Other variations are untested.Differences for the maintainer~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~* It's a complete and clean rewrite, supporting only Python 3, with easier to understand and  therefore easier to maintain code, hopefully meaning more people can contribute.* It doesn't rely on internal mappings of file types and export filters, but asks LibreOffice  for this information, which will increase compatibility with different LibreOffice versions,  and also lowers maintenance.Contributors------------* Lennart Regebro, regebro@gmail.com* Stephan Richter, srichter@shoobx.com* Bruno Simão, https://github.com/ankology* Åsmund Stavdahl, https://github.com/asmundstavdahl1.3 (2023-02-03)----------------- Now works on Windows (although it's not officially supported).- Added --filter argument to unoconverter to allow explicit selection of which  export filter to use for conversion.1.2 (2022-03-17)----------------- Move logging configuration from import time to the main() functions.- Improved the handling of KeyboardInterrupt- Added the deprecated but still necessary com.sun.star.text.WebDocument  for HTML docs.1.1 (2021-10-14)----------------- Fixed a bug: If you specified an unknown file extension while piping the  result to stdout, you would get a type error instead of the correct error.- Added an extra check that libreoffice is quite dead when exiting,  I experienced a few cases where soffice.bin was using 100% load in the  background after unoserver exited. I hope this takes care of that.- Added ``if __name__ == &quot;main&quot;:`` blocks so you can run the modules  as scripts, and also with ``python3 -m unoserver.server`` and  ``python3 -m unoserver.converter``.1.0.1 (2021-09-20)------------------- Fixed a bug that meant `unoserver` did not behave well with Supervisord's restart command.1.0 (2021-08-10)----------------- A few small spelling and grammar changes.1.0b3 (2021-07-01)------------------- Make sure `interface` and `port` options are honored.- Added an --executable option to the server to pick a specific libreoffice installation.- Changed the infile and outfile options to be positional.- Added support for using stdin and stdout.- Added a --convert-to argument to specify the resulting filetype.1.0b2 (2021-06-24)------------------- A bug prevented converting to or from files in the local directory.1.0b1 (2021-06-24)------------------- First beta release0.0.1 (2021-06-16)------------------- First alpha release</longdescription>
</pkgmetadata>