<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd">
<pkgmetadata>
	<maintainer type="person">
		<email>gentoo@houseofsuns.org</email>
		<name>Markus Walter</name>
	</maintainer>
	<longdescription>&lt;p align=&quot;center&quot;&gt;  &lt;a href=&quot;https://v2.nonebot.dev/&quot;&gt;&lt;img src=&quot;https://v2.nonebot.dev/logo.png&quot; width=&quot;200&quot; height=&quot;200&quot; alt=&quot;nonebot&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;div align=&quot;center&quot;&gt;# NoneBot Plugin Alconna_âœ¨ Alconna Usage For NoneBot2 âœ¨_&lt;/div&gt;&lt;p align=&quot;center&quot;&gt;  &lt;a href=&quot;https://raw.githubusercontent.com/nonebot/plugin-alconna/master/LICENSE&quot;&gt;    &lt;img src=&quot;https://img.shields.io/github/license/nonebot/plugin-alconna.svg&quot; alt=&quot;license&quot;&gt;  &lt;/a&gt;  &lt;a href=&quot;https://pypi.python.org/pypi/nonebot-plugin-alconna&quot;&gt;    &lt;img src=&quot;https://img.shields.io/pypi/v/nonebot-plugin-alconna.svg&quot; alt=&quot;pypi&quot;&gt;  &lt;/a&gt;  &lt;img src=&quot;https://img.shields.io/badge/python-3.8+-blue.svg&quot; alt=&quot;python&quot;&gt;&lt;/p&gt;è¯¥æ’ä»¶æä¾›äº† [Alconna](https://github.com/ArcletProject/Alconna) çš„ [Nonebot2](https://github.com/nonebot/nonebot2) é€‚é…ç‰ˆæœ¬ä¸å·¥å…·## ç‰¹æ€§- å®Œæ•´çš„ Alconna ç‰¹æ€§æ”¯æŒ- åŸºæœ¬çš„ rule, matcher ä¸ ä¾èµ–æ³¨å…¥- è‡ªåŠ¨å›å¤å‘½ä»¤å¸®åŠ©ä¿¡æ¯ (help, shortcut, completion) é€‰é¡¹- ç°æœ‰å…¨éƒ¨åè®®çš„ Segment æ ‡æ³¨- match_value, match_path ç­‰æ£€æŸ¥å‡½æ•°- è¡¥å…¨ä¼šè¯æ”¯æŒ## è®¨è®ºQQ äº¤æµç¾¤: [é“¾æ¥](https://jq.qq.com/?_wv=1027&amp;k=PUPOnCSH)## ä½¿ç”¨æ–¹æ³•Nonebotæ–‡æ¡£: [ğŸ“–è¿™é‡Œ](https://nonebot.dev/docs/advanced/matcher#alconna)è¯¦ç»†ä»‹ç»: [ğŸ“¦è¿™é‡Œ](/docs.md)### æ¶ˆæ¯è§£æ```pythonfrom nonebot.adapters.onebot.v12 import Message, MessageSegmentfrom arclet.alconna import Alconna, Option, Argsmsg = Message(&quot;Hello! --foo 123&quot;)img = MessageSegment.image(&quot;1.png&quot;)print(msg)alc = Alconna(&quot;Hello!&quot;, Option(&quot;--foo&quot;, Args[&quot;foo&quot;, int]))res = alc.parse(msg)assert res.matchedassert res.query(&quot;foo.foo&quot;) == 123assert not alc.parse(Message([&quot;Hello!&quot;, img])).matched```### MessageSegment æ ‡æ³¨ç‰¹å®šé€‚é…å™¨:```pythonfrom nonebot_plugin_alconna.adapters.onebot12 import Mentionfrom nonebot.adapters.onebot.v12 import Messagefrom arclet.alconna import Alconna, Argsmsg = Message([&quot;Hello!&quot;, Mention(&quot;123&quot;)])print(msg)  # Hello![mention:user_id=123]alc = Alconna(&quot;Hello!&quot;, Args[&quot;target&quot;, Mention])res = alc.parse(msg)assert res.matchedassert res.query(&quot;target&quot;).data['user_id'] == '123'```é€šç”¨æ ‡æ³¨:```pythonfrom nonebot.adapters.onebot.v12 import Message as Ob12Msg, MessageSegment as Ob12MSfrom nonebot.adapters.onebot.v11 import Message as Ob11Msg, MessageSegment as Ob11MSfrom nonebot_plugin_alconna.adapters import Atfrom arclet.alconna import Alconna, Argsmsg1 = Ob12Msg([&quot;Hello!&quot;, Ob12MS.mention(&quot;123&quot;)]) # Hello![mention:user_id=123]msg2 = Ob11Msg([&quot;Hello!&quot;, Ob11MS.at(123)]) # Hello![CQ:at,qq=123]alc = Alconna(&quot;Hello!&quot;, Args[&quot;target&quot;, At])res1 = alc.parse(msg1)assert res1.matchedtarget = res1.query(&quot;target&quot;)assert isinstance(target, At)assert target.target == '123'res2 = alc.parse(msg2)assert res2.matchedtarget = res2.query(&quot;target&quot;)assert isinstance(target, At)assert target.target == '123'```### Matcher ä¸ ä¾èµ–æ³¨å…¥```python...from nonebot import requirerequire(&quot;nonebot_plugin_alconna&quot;)...from nonebot_plugin_alconna import (    on_alconna,     Match,    Query,    AlconnaMatch,     AlconnaQuery,    AlcMatches,    AlcResult)from arclet.alconna import Alconna, Args, Optiontest = on_alconna(    Alconna(        &quot;test&quot;,        Option(&quot;foo&quot;, Args[&quot;bar&quot;, int]),        Option(&quot;baz&quot;, Args[&quot;qux&quot;, bool, False])    ),    auto_send_output=True)@test.handle()async def handle_test1(result: AlcResult):    await test.send(f&quot;matched: {result.matched}&quot;)    await test.send(f&quot;maybe output: {result.output}&quot;)@test.handle()async def handle_test2(result: AlcMatches):    await test.send(f&quot;head result: {result.header_result}&quot;)    await test.send(f&quot;args: {result.all_matched_args}&quot;)@test.handle()async def handle_test3(bar: Match[int] = AlconnaMatch(&quot;bar&quot;)):    if bar.available:            await test.send(f&quot;foo={bar.result}&quot;)@test.handle()async def handle_test4(qux: Query[bool] = AlconnaQuery(&quot;baz.qux&quot;, False)):    if qux.available:        await test.send(f&quot;baz.qux={qux.result}&quot;)```### æ¡ä»¶æ§åˆ¶```python...from nonebot import requirerequire(&quot;nonebot_plugin_alconna&quot;)...from arclet.alconna import Alconna, Subcommand, Option, Argsfrom nonebot_plugin_alconna import assign, on_alconna, AlconnaResult, CommandResult, Checkpip = Alconna(    &quot;pip&quot;,    Subcommand(        &quot;install&quot;,         Args[&quot;pak&quot;, str],        Option(&quot;--upgrade&quot;),        Option(&quot;--force-reinstall&quot;)    ),    Subcommand(        &quot;list&quot;,        Option(&quot;--out-dated&quot;)    ))pip_cmd = on_alconna(pip)@pip_cmd.handle([Check(assign(&quot;install.pak&quot;, &quot;pip&quot;))])async def update(arp: CommandResult = AlconnaResult()):    ...@pip_cmd.handle([Check(assign(&quot;list&quot;))])async def list_(arp: CommandResult = AlconnaResult()):    ...@pip_cmd.handle([Check(assign(&quot;install&quot;))])async def install(arp: CommandResult = AlconnaResult()):    ...@pip_cmd.assign(&quot;install&quot;, &quot;nonebot&quot;)async def nonebot(arp: CommandResult = AlconnaResult()):    ...```### Duplication```python...from nonebot import requirerequire(&quot;nonebot_plugin_alconna&quot;)...from nonebot_plugin_alconna import (    on_alconna,     AlconnaDuplication)from arclet.alconna import Alconna, Args, Duplication, Option, OptionStubtest = on_alconna(    Alconna(        &quot;test&quot;,        Option(&quot;foo&quot;, Args[&quot;bar&quot;, int]),        Option(&quot;baz&quot;, Args[&quot;qux&quot;, bool, False])    ),    auto_send_output=True)class MyResult(Duplication):    bar: int    qux: bool    foo: OptionStub@test.handle()async def handle_test1(result: MyResult = AlconnaDuplication(MyResult)):    await test.send(f&quot;matched: bar={result.bar}, qux={result.qux}&quot;)    await test.send(f&quot;options: foo={result.foo.origin}&quot;)```## é…ç½®ç›®å‰é…ç½®é¡¹æœ‰ï¼š- ALCONNA_AUTO_SEND_OUTPUT : æ˜¯å¦å…¨å±€å¯ç”¨è¾“å‡ºä¿¡æ¯è‡ªåŠ¨å‘é€- ALCONNA_USE_COMMAND_START : æ˜¯å¦å°† COMMAND_START ä½œä¸ºå…¨å±€å‘½ä»¤å‰ç¼€- ALCONNA_AUTO_COMPLETION: æ˜¯å¦å…¨å±€å¯ç”¨è¡¥å…¨ä¼šè¯åŠŸèƒ½- ALCONNA_USE_ORIGIN: æ˜¯å¦å…¨å±€ä½¿ç”¨åŸå§‹æ¶ˆæ¯ (å³æœªç»è¿‡ to_me ç­‰å¤„ç†çš„)## å‚æ•°è§£é‡Š```pythondef on_alconna(    command: Alconna | str,    skip_for_unmatch: bool = True,    auto_send_output: bool = False,    output_converter: Callable[[OutputType, str], Message | Awaitable[Message]] | None = None,    aliases: set[str | tuple[str, ...]] | None = None,    comp_config: CompConfig | None = None,    use_origin: bool = False,    **kwargs,) -&gt; type[Matcher]:```- `command`: Alconna å‘½ä»¤- `skip_for_unmatch`: æ˜¯å¦åœ¨å‘½ä»¤ä¸åŒ¹é…æ—¶è·³è¿‡è¯¥å“åº”- `auto_send_output`: æ˜¯å¦è‡ªåŠ¨å‘é€è¾“å‡ºä¿¡æ¯å¹¶è·³è¿‡å“åº”- `output_converter`: è¾“å‡ºä¿¡æ¯å­—ç¬¦ä¸²è½¬æ¢ä¸º Message æ–¹æ³•- `aliases`: å‘½ä»¤åˆ«å, ä½œç”¨ç±»ä¼¼äº `on_command`- `comp_config`: è¡¥å…¨ä¼šè¯é…ç½®, ä¸ä¼ å…¥åˆ™ä¸å¯ç”¨è¡¥å…¨ä¼šè¯- `use_origin`: æ˜¯å¦ä½¿ç”¨æœªç» to_me ç­‰å¤„ç†è¿‡çš„æ¶ˆæ¯## æä¾›äº† MessageSegmentæ ‡æ³¨ çš„åè®®:| åè®®åç§°                                                                | è·¯å¾„                                   ||---------------------------------------------------------------------|--------------------------------------|| [OneBot åè®®](https://onebot.dev/)                                    | adapters.onebot11, adapters.onebot12 || [Telegram](https://core.telegram.org/bots/api)                      | adapters.telegram                    || [é£ä¹¦](https://open.feishu.cn/document/home/index)                    | adapters.feishu                      || [GitHub](https://docs.github.com/en/developers/apps)                | adapters.github                      || [QQ é¢‘é“](https://bot.q.qq.com/wiki/)                                 | adapters.qqguild                     || [é’‰é’‰](https://open.dingtalk.com/document/)                           | adapters.ding                        || [Console](https://github.com/nonebot/adapter-console)               | adapters.console                     || [å¼€é»‘å•¦](https://developer.kookapp.cn/)                                | adapters.kook                        || [Mirai](https://docs.mirai.mamoe.net/mirai-api-http/)               | adapters.mirai                       || [Ntchat](https://github.com/JustUndertaker/adapter-ntchat)          | adapters.ntchat                      || [MineCraft](https://github.com/17TheWord/nonebot-adapter-minecraft) | adapters.minecraft                   || [BiliBili Live](https://github.com/wwweww/adapter-bilibili)         | adapters.bilibili                    || [Walle-Q](https://github.com/onebot-walle/nonebot_adapter_walleq)   | adapters.onebot12                    || [Villa](https://github.com/CMHopeSunshine/nonebot-adapter-villa)    | adapters.villa                       |### ä¾¿æ·è£…é¥°å™¨`funcommand` è£…é¥°å™¨ç”¨äºå°†ä¸€ä¸ªæ¥å—ä»»æ„å‚æ•°ï¼Œè¿”å› `str` æˆ– `Message` æˆ– `MessageSegment` çš„å‡½æ•°è½¬æ¢ä¸ºå‘½ä»¤å“åº”å™¨ã€‚```pythonfrom nonebot_plugin_alconna import funcommand@funcommand()async def echo(msg: str):    return msg```## ä½“éªŒ[demo bot](./src/test/plugins/demo.py)</longdescription>
</pkgmetadata>